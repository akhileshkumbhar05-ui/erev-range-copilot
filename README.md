# EREV Copilot – Extended-Range EV Analysis & Dashboard (U.S. 2023)

This repository contains the code for **EREV Copilot**, an analytical model and
Streamlit dashboard that explores how **Extended-Range Electric Vehicles (EREVs)**
contribute to electrified miles, CO₂ reduction, and battery cost effectiveness.

The project is aligned with the paper:

> *Contributions of Extended-Range Electric Vehicles (EREVs) to Electrified
> Miles, Emissions and Transportation Cost Reduction* (U.S. light-duty fleet,
> 2023).

The focus is on a **single, well-validated 2023 scenario**, using national
light-duty Vehicle Miles Traveled (VMT) consistent with FHWA VM-1 and the
published analysis.

---

## Key features

- **Analytical EREV model (2023)**  
  - Computes EV vs gasoline VMT share for a given electric range and charging
    frequency.  
  - Estimates CO₂ savings versus a conventional gasoline baseline.  
  - Computes battery CAPEX per ton of CO₂ abated across ranges and usage
    scenarios.

- **Interactive dashboard (Streamlit)**  
  - **EREV Range Explorer**: interactivly adjust range (e.g., 25–150 miles),
    charges per week, and behavioral scenario; see EV share, CO₂ savings, and
    cost metrics.  
  - **FHWA VMT – 2023 Summary**: shows the LDV VMT value used as `VMT_TOTAL`.  
  - **EREV Calculations Results**: full table of model outputs plus line charts
    for CO₂ savings and $/tCO₂ vs range.

- **Reproducible 2023 pipeline**  
  - Single command to regenerate the model outputs used in the dashboard
    and figures.

---

## Repository structure

```text
EREV-Project/
  config/
    erev_scenarios.yaml      # Scenario definitions (charging frequency, adoption, etc.)

  data/
    external/                # FHWA downloads/cache (gitignored)
    processed/               # Model outputs (CSV) – regenerated by pipeline
      erev_calculations_results.csv
      erev_range_results_example.csv
      erev_scenario_grid.csv
    raw/
      trip_bins_example.csv  # Example trip-bin data for the VMT model

  docs/                      # Optional: paper PDF, slides, etc.
  notebooks/                 # Exploratory analysis / scratch work

  scripts/
    run_full_pipeline.py     # MAIN: reproduce 2023 EREV analysis and save CSV outputs
    run_dashboard.py         # MAIN: launch Streamlit dashboard
    run_cli_scenarios.py     # CLI interface for scenario grid / summary tables
    run_reproduce_results.py # Legacy script – kept for reference
    show_scenarios.py        # Helper: print out configured scenarios from YAML
    plot_ev_share_vs_range.py# Helper: static EV share vs range plot

  src/
    evcopilot/
      __init__.py
      app/
        __init__.py
        dashboard.py         # Streamlit UI – all three tabs
      data/
        __init__.py
        fhwa_api.py          # FHWA VM-1 helper; exposes 2023 LDV VMT used in model
        loaders.py           # Load trip-bin and scenario data
        scenario_config.py   # Parse config/erev_scenarios.yaml
      model/
        __init__.py
        vmt_bins.py          # Trip-bin structure and VMT distribution logic
        range_scenarios.py   # Range/charging behavior scenarios
        emissions_costs.py   # Emissions and cost calculations
        erev_calculations.py # High-level 2023 analytical model (paper-equivalent)

  .gitignore
  README.md
  requirements.txt
